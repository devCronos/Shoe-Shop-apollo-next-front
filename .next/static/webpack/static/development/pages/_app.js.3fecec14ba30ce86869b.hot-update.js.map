{"version":3,"file":"static/webpack/static\\development\\pages\\_app.js.3fecec14ba30ce86869b.hot-update.js","sources":["webpack:///./components/RemoveFromCart.js"],"sourcesContent":["import React, { Component } from 'react';\nimport {Mutation} from 'react-apollo';\nimport styled from 'styled-components';\nimport PropTypes from 'prop-types';\nimport gql from 'graphql-tag';\nimport { CURRENT_USER_QUERY } from \"./User\";\n\nconst BigButton = styled.button`\nfont-size:3rem;\nbackground: none;\nborder:0;\n&:hover {\n    color: ${props => props.theme.red};\n    cursor: pointer;\n}\n`;\n\nconst REMOVE_FROM_CART_MUTATION = gql`\nmutation removeFromCart($id: ID!) {\n    removeFromCart(id: $id) {\n        id\n    }\n}\n`;\n\nclass RemoveFromCart extends Component {\n    static propTypes = {\n        id: PropTypes.string.isRequired\n    }\n    // this gets called as soon as we get a response back from the server after a mutation has been performed\n    update = (update, payload) => {\n        //  read the cache\n        const data = cache.readQuery({query: CURRENT_USER_QUERY});\n        // remove that item from cart\n        const cartItemId = payload.data.removeFromCart.id;\n        data.me.cart = data.me.cart.filter(cartItem => cartItem.id!==cartItemId);\n        // write it back to the cache\n        cache.writeQuery({query: CURRENT_USER_QUERY, data})\n    }\n    render() {\n        return (\n            <Mutation mutation={REMOVE_FROM_CART_MUTATION}\n            variables={{id: this.props.id}} \n            update={this.update} >\n                {(removeFromCart,{loading,error}) => (\n                    <BigButton\n                    disabled={loading}\n                    onClick={()=>{\n                        removeFromCart().catch(err=>alert(err.message))\n                    }} \n                    title=\"Delete Item\">&times;\n                    </BigButton>\n                )}\n            </Mutation>\n        )\n    }\n}\n\nexport default RemoveFromCart;"],"mappings":";;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;AAAA;AACA;AACA;AACA;AACA;AACA;AAEA;AAAA;AAAA;AAAA;AAKA;AAAA;AAKA;AACA;AAOA;;;;;;;;;;;;;;;;;;AAKA;AACA;AACA;AAAA;AAAA;AACA;AACA;AACA;AAAA;AAAA;AACA;AACA;AAAA;AAAA;AAAA;AACA;AACA;;;;;;AAAA;AACA;AACA;AACA;AAAA;AAAA;AACA;AAFA;AAAA;AAAA;AAAA;AAAA;AAAA;AAGA;AAAA;AAAA;AAEA;AACA;AACA;AAAA;AAAA;AACA;AACA;AALA;AAAA;AAAA;AAAA;AAAA;AAAA;AADA;AAWA;;;;AA9BA;AACA;AADA;AAEA;AACA;AAFA;AACA;AA+BA;;;;A","sourceRoot":""}